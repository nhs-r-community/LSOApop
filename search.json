[{"path":[]},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others’ private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement [INSERT CONTACT METHOD]. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.0, available https://www.contributor-covenant.org/version/2/0/ code_of_conduct.html. Community Impact Guidelines inspired Mozilla’s code conduct enforcement ladder. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https:// www.contributor-covenant.org/translations.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 NHS-R Community Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/NHSRpopulation.html","id":"indices-of-multiple-deprivation-imd","dir":"Articles","previous_headings":"","what":"Indices of Multiple Deprivation (IMD)","title":"Getting started with NHSRpopulation","text":"get IMD scores (raw scores ranked deciles) dataset run following code generate random example postcodes: , using get_data() function vector: data frame: Note function uses {NHSRpostcodetools} package offer opportunity fix postcodes terminated incorrect. default appears column new_postcode overwrite original postcode column. Switching automatic fix can done code accept vectors data frames:","code":"library(tibble) library(NHSRpopulation)  postcodes <- c(\"HD1 2UT\", \"HD1 2UU\", \"HD1 2UV\")  tibble_postcodes <- postcodes |>   tibble::as_tibble() |>   dplyr::rename(postcode = value)  tibble_postcodes #> # A tibble: 3 × 1 #>   postcode #>   <chr>    #> 1 HD1 2UT  #> 2 HD1 2UU  #> 3 HD1 2UV # Execution halted NHSRpopulation::get_data(postcodes) |>   dplyr::select(     postcode,     new_postcode,     result_type,     lsoa_code   ) #> ℹ The following postcodes are terminated: #>   HD1 2UT #>   and have been replaced with these current postcodes: #>   HD1 2RD #> ℹ The following postcodes are invalid: #>   HD1 2UV #>   and have been replaced with these nearby postcodes: #>   HD1 2UD #> Error in `dplyr::select()`: #> ! Can't select columns that don't exist. #> ✖ Column `postcode` doesn't exist. NHSRpopulation::get_data(tibble_postcodes) |>   dplyr::select(     postcode,     new_postcode,     result_type,     lsoa_code   ) #> ℹ The following postcodes are terminated: #>   HD1 2UT #>   and have been replaced with these current postcodes: #>   HD1 2RD #> ℹ The following postcodes are invalid: #>   HD1 2UV #>   and have been replaced with these nearby postcodes: #>   HD1 2UD #> Joining with `by = join_by(postcode)` #> # A tibble: 3 × 4 #>   postcode new_postcode result_type   lsoa_code #>   <chr>    <chr>        <chr>         <chr>     #> 1 HD1 2UT  HD1 2RD      terminated    E01011107 #> 2 HD1 2UU  HD1 2UU      valid         E01011229 #> 3 HD1 2UV  HD1 2UD      autocompleted E01011229 NHSRpopulation::get_data(tibble_postcodes, fix_invalid = FALSE) |>   dplyr::select(     postcode,     new_postcode,     result_type,     lsoa_code   ) #> ℹ The following postcodes are invalid: #>   HD1 2UT #>   but have not been successfully replaced with valid codes. #>   The following postcodes are invalid: #>   HD1 2UV #>   but have not been successfully replaced with valid codes. #> Joining with `by = join_by(postcode)` #> # A tibble: 3 × 4 #>   postcode new_postcode result_type lsoa_code #>   <chr>    <chr>        <chr>       <chr>     #> 1 HD1 2UT  <NA>         <NA>        <NA>      #> 2 HD1 2UU  HD1 2UU      valid       E01011229 #> 3 HD1 2UV  <NA>         <NA>        <NA>"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/NHSRpopulation.html","id":"index-of-multiple-deprivation","dir":"Articles","previous_headings":"","what":"Index of Multiple Deprivation","title":"Getting started with NHSRpopulation","text":"Using function parameter/argument return IMD data: Data can either vectors data frames. corrections made incorrect LSOA codes.","code":"# Note that the third LSOA in this list is incorrect on purpose imd <- c(\"E01011107\", \"E01011229\", \"E01002\")  tibble_imd <- imd |>   tibble::as_tibble() |>   dplyr::rename(lsoa11 = value)  tibble_imd #> # A tibble: 3 × 1 #>   lsoa11    #>   <chr>     #> 1 E01011107 #> 2 E01011229 #> 3 E01002 NHSRpopulation::get_data(tibble_imd, url_type = \"imd\") |>   dplyr::select(     lsoa11,     imd_rank,     imd_decile,     imd_score   ) #> # A tibble: 3 × 4 #>   lsoa11    imd_rank imd_decile imd_score #>   <chr>        <int>      <int>     <dbl> #> 1 E01011107     2928          1      45.6 #> 2 E01011229     9558          3      27.0 #> 3 E01002          NA         NA      NA"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/NHSRpopulation.html","id":"column-names","dir":"Articles","previous_headings":"","what":"Column names","title":"Getting started with NHSRpopulation","text":"data frames used expectation functions postcodes column called postcode IMD lsoa11, however, can overwritten: argument/parameter column = can used set column name:","code":"# Create datasets pcs_tb <- dplyr::tibble(   pcs = postcodes )  pcs_tb #> # A tibble: 3 × 1 #>   pcs     #>   <chr>   #> 1 HD1 2UT #> 2 HD1 2UU #> 3 HD1 2UV  NHSRpopulation::get_data(pcs_tb,   column = \"pcs\" ) #> ℹ The following postcodes are terminated: #>   HD1 2UT #>   and have been replaced with these current postcodes: #>   HD1 2RD #> ℹ The following postcodes are invalid: #>   HD1 2UV #>   and have been replaced with these nearby postcodes: #>   HD1 2UD #> Joining with `by = join_by(pcs)` #> # A tibble: 3 × 40 #>   pcs     new_postcode result_type   quality eastings northings country nhs_ha    longitude latitude european_electoral_r…¹ primary_care_trust region lsoa  msoa  incode #>   <chr>   <chr>        <chr>           <int>    <int>     <int> <chr>   <chr>         <dbl>    <dbl> <chr>                  <chr>              <chr>  <chr> <chr> <chr>  #> 1 HD1 2UT HD1 2RD      terminated          1   414639    416430 England Yorkshir…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2RD    #> 2 HD1 2UU HD1 2UU      valid               1   414433    416422 England Yorkshir…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2UU    #> 3 HD1 2UV HD1 2UD      autocompleted       1   414371    416317 England Yorkshir…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2UD    #> # ℹ abbreviated name: ¹​european_electoral_region #> # ℹ 24 more variables: outcode <chr>, parliamentary_constituency <chr>, parliamentary_constituency_2024 <chr>, admin_district <chr>, parish <chr>, #> #   date_of_introduction <chr>, admin_ward <chr>, ccg <chr>, nuts <chr>, pfa <chr>, admin_district_code <chr>, admin_county_code <chr>, admin_ward_code <chr>, #> #   parish_code <chr>, parliamentary_constituency_code <chr>, parliamentary_constituency_2024_code <chr>, ccg_code <chr>, ccg_id_code <chr>, ced_code <chr>, #> #   nuts_code <chr>, lsoa_code <chr>, msoa_code <chr>, lau2_code <chr>, pfa_code <chr> lsoa_tb <- dplyr::tibble(   lower_soa = imd )  lsoa_tb #> # A tibble: 3 × 1 #>   lower_soa #>   <chr>     #> 1 E01011107 #> 2 E01011229 #> 3 E01002  NHSRpopulation::get_data(lsoa_tb,   column = \"lower_soa\" ) #> # A tibble: 3 × 66 #>   lower_soa   fid lsoa11nm  lsoa11nmw st_areasha st_lengths imd_rank imd_decile lsoa01nm la_dcd la_dnm imd_score imd_rank0 imd_dec0 inc_score inc_rank inc_dec emp_score #>   <chr>     <int> <chr>     <chr>          <dbl>      <dbl>    <int>      <int> <chr>    <chr>  <chr>      <dbl>     <int>    <int>     <dbl>    <int>   <int>     <dbl> #> 1 E01011107 11200 Kirklees… Kirklees…   1921709.      7525.     2928          1 Kirklee… E0800… Kirkl…      45.6      2928        1     0.256     3753       2     0.176 #> 2 E01011229 11707 Kirklees… Kirklees…    833130.      7023.     9558          3 Kirklee… E0800… Kirkl…      27.0      9558        3     0.092    17587       6     0.068 #> 3 E01002       NA <NA>      <NA>             NA         NA        NA         NA <NA>     <NA>   <NA>        NA          NA       NA    NA           NA      NA    NA     #> # ℹ 48 more variables: emp_rank <int>, emp_dec <int>, edu_score <dbl>, edu_rank <int>, edu_dec <int>, hdd_score <dbl>, hdd_rank <int>, hdd_dec <int>, cri_score <dbl>, #> #   cri_rank <int>, cri_dec <int>, bhs_score <dbl>, bhs_rank <int>, bhs_dec <int>, env_score <dbl>, env_rank <int>, env_dec <int>, idc_score <dbl>, idc_rank <int>, #> #   idc_dec <int>, ido_score <dbl>, ido_rank <int>, ido_dec <int>, cyp_score <dbl>, cyp_rank <int>, cyp_dec <int>, as_score <dbl>, as_rank <int>, as_dec <int>, #> #   gb_score <dbl>, gb_rank <int>, gb_dec <int>, wb_score <dbl>, wb_rank <int>, wb_dec <int>, ind_score <dbl>, ind_rank <int>, ind_dec <int>, out_score <dbl>, #> #   out_rank <int>, out_dec <int>, tot_pop <int>, dep_chi <int>, pop16_59 <int>, pop60 <int>, work_pop <dbl>, shape_area <dbl>, shape_length <dbl>"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/NHSRpopulation.html","id":"getting-imd-data-from-postcodes","dir":"Articles","previous_headings":"Column names","what":"Getting IMD data from postcodes","title":"Getting started with NHSRpopulation","text":"data postcodes (automatically connects postcode API) IMD information wanted, argument/parameter url_type == \"imd\" override returned data IMD. Note postcode data still validated.","code":"NHSRpopulation::get_data(tibble_postcodes,                           url_type = \"imd\") #> ℹ The following postcodes are terminated: #>   HD1 2UT #>   and have been replaced with these current postcodes: #>   HD1 2RD #> ℹ The following postcodes are invalid: #>   HD1 2UV #>   and have been replaced with these nearby postcodes: #>   HD1 2UD #> Joining with `by = join_by(postcode)` #> # A tibble: 3 × 105 #>   postcode new_postcode result_type   quality eastings northings country nhs_ha   longitude latitude european_electoral_r…¹ primary_care_trust region lsoa  msoa  incode #>   <chr>    <chr>        <chr>           <int>    <int>     <int> <chr>   <chr>        <dbl>    <dbl> <chr>                  <chr>              <chr>  <chr> <chr> <chr>  #> 1 HD1 2UT  HD1 2RD      terminated          1   414639    416430 England Yorkshi…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2RD    #> 2 HD1 2UU  HD1 2UU      valid               1   414433    416422 England Yorkshi…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2UU    #> 3 HD1 2UV  HD1 2UD      autocompleted       1   414371    416317 England Yorkshi…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2UD    #> # ℹ abbreviated name: ¹​european_electoral_region #> # ℹ 89 more variables: outcode <chr>, parliamentary_constituency <chr>, parliamentary_constituency_2024 <chr>, admin_district <chr>, parish <chr>, #> #   date_of_introduction <chr>, admin_ward <chr>, ccg <chr>, nuts <chr>, pfa <chr>, admin_district_code <chr>, admin_county_code <chr>, admin_ward_code <chr>, #> #   parish_code <chr>, parliamentary_constituency_code <chr>, parliamentary_constituency_2024_code <chr>, ccg_code <chr>, ccg_id_code <chr>, ced_code <chr>, #> #   nuts_code <chr>, lsoa_code <chr>, msoa_code <chr>, lau2_code <chr>, pfa_code <chr>, fid <int>, lsoa11nm <chr>, lsoa11nmw <chr>, st_areasha <dbl>, st_lengths <dbl>, #> #   imd_rank <int>, imd_decile <int>, lsoa01nm <chr>, la_dcd <chr>, la_dnm <chr>, imd_score <dbl>, imd_rank0 <int>, imd_dec0 <int>, inc_score <dbl>, inc_rank <int>, #> #   inc_dec <int>, emp_score <dbl>, emp_rank <int>, emp_dec <int>, edu_score <dbl>, edu_rank <int>, edu_dec <int>, hdd_score <dbl>, hdd_rank <int>, hdd_dec <int>, … NHSRpopulation::get_data(tibble_postcodes,                           url_type = \"imd\",                          fix_invalid = FALSE) #> ℹ The following postcodes are invalid: #>   HD1 2UT #>   but have not been successfully replaced with valid codes. #>   The following postcodes are invalid: #>   HD1 2UV #>   but have not been successfully replaced with valid codes. #> Joining with `by = join_by(postcode)` #> # A tibble: 3 × 105 #>   postcode new_postcode result_type quality eastings northings country nhs_ha     longitude latitude european_electoral_r…¹ primary_care_trust region lsoa  msoa  incode #>   <chr>    <chr>        <chr>         <int>    <int>     <int> <chr>   <chr>          <dbl>    <dbl> <chr>                  <chr>              <chr>  <chr> <chr> <chr>  #> 1 HD1 2UT  <NA>         <NA>             NA       NA        NA <NA>    <NA>           NA        NA   <NA>                   <NA>               <NA>   <NA>  <NA>  <NA>   #> 2 HD1 2UU  HD1 2UU      valid             1   414433    416422 England Yorkshire…     -1.78     53.6 Yorkshire and The Hum… Kirklees           Yorks… Kirk… Kirk… 2UU    #> 3 HD1 2UV  <NA>         <NA>             NA       NA        NA <NA>    <NA>           NA        NA   <NA>                   <NA>               <NA>   <NA>  <NA>  <NA>   #> # ℹ abbreviated name: ¹​european_electoral_region #> # ℹ 89 more variables: outcode <chr>, parliamentary_constituency <chr>, parliamentary_constituency_2024 <chr>, admin_district <chr>, parish <chr>, #> #   date_of_introduction <chr>, admin_ward <chr>, ccg <chr>, nuts <chr>, pfa <chr>, admin_district_code <chr>, admin_county_code <chr>, admin_ward_code <chr>, #> #   parish_code <chr>, parliamentary_constituency_code <chr>, parliamentary_constituency_2024_code <chr>, ccg_code <chr>, ccg_id_code <chr>, ced_code <chr>, #> #   nuts_code <chr>, lsoa_code <chr>, msoa_code <chr>, lau2_code <chr>, pfa_code <chr>, fid <int>, lsoa11nm <chr>, lsoa11nmw <chr>, st_areasha <dbl>, st_lengths <dbl>, #> #   imd_rank <int>, imd_decile <int>, lsoa01nm <chr>, la_dcd <chr>, la_dnm <chr>, imd_score <dbl>, imd_rank0 <int>, imd_dec0 <int>, inc_score <dbl>, inc_rank <int>, #> #   inc_dec <int>, emp_score <dbl>, emp_rank <int>, emp_dec <int>, edu_score <dbl>, edu_rank <int>, edu_dec <int>, hdd_score <dbl>, hdd_rank <int>, hdd_dec <int>, …"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"imd-ranks","dir":"Articles","previous_headings":"","what":"IMD ranks","title":"How to calculate 'local' IMD deciles","text":"mentioned , raw IMD scores can grouped based rank, usually 10 groups (deciles) calculated based IMD scores entire country. decile scores, lower deciles representing ‘deprived’ areas higher deciles represent ‘less deprived’. can confusing IMD scores IMD deciles scored opposite directions.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"england-imd-deciles","dir":"Articles","previous_headings":"IMD ranks","what":"England IMD deciles","title":"How to calculate 'local' IMD deciles","text":"Figure 2.1 illustrates distribution IMD deciles calculated based whole country (England) can relatively unequal comparing individual LAs (e.g., Nottingham (City) versus Rushcliffe). cases using deciles calculated based IMD scores entire country may miss important regional differences useful recalculate IMD deciles within Local Authorities. Whilst Ministry Housing, Communities & Local Government (2019) given guidance calculate analyse IMD scores, clear examples guidance calculate local IMD ranks.","code":"# Plot deciles ---- imd |>   mutate(imd_decile = factor(imd_decile,     levels = 1:10,     labels = c(\"1 - Most deprived\", 2:9, \"10 - Least deprived\")   )) |>   filter(la_code %in% la_code_nott_city_notts_county) |>   ggplot(aes(factor(imd_decile), fill = factor(imd_decile))) +   geom_bar() +   scale_fill_viridis_d() +   scale_x_discrete(labels = 1:10) +   labs(x = \"IMD decile\", y = \"Count\", fill = \"IMD decile\") +   ggtitle(\"Fig. 2.1. Combined ENG IMD deciles for LSOAs in Nott City and Notts County\") imd |>   mutate(imd_decile = factor(imd_decile,     levels = 1:10,     labels = c(\"1 - Most deprived\", 2:9, \"10 - Least deprived\")   )) |>   filter(la_code %in% la_code_nott_city_notts_county) |>   ggplot(aes(factor(imd_decile), fill = factor(imd_decile))) +   geom_bar() +   scale_fill_viridis_d() +   labs(x = \"IMD decile\", y = \"Count\", fill = \"IMD decile\") +   facet_wrap(~la_name, ncol = 2) +   scale_x_discrete(labels = 1:10) +   ggtitle(\"Fig. 2.2. Individual ENG IMD deciles for LSOAs in Nott City and Notts County\")"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"calculate-local-imd-deciles-within-local-authorities","dir":"Articles","previous_headings":"IMD ranks","what":"Calculate ‘local’ IMD deciles within Local Authorities","title":"How to calculate 'local' IMD deciles","text":"following example illustrates local IMD ranks can calculated within selected group LAs (see first code chunk list LA codes defined: la_code_nott_city_notts_county). recalculate IMD deciles Local Authorities data needs grouped defined group Local Authorities (see code , variable la_group gets calculated example) year IMD score (‘group_by(la_code, imd_year)’). Next, calculate deciles using function ‘dplyr::ntile()’ specifying ‘n = 10’. calculate quintiles (5 groups) argument need changed n = 5. take account IMD scores IMD ranks scored opposite direction, need add minus IMD score: ntile(-imd_score, n = 10).","code":"# Calculate IMD decile ranks (n = 10) for local authorities ---- imd_by_la <- imd |>   mutate(la_groups = case_when(     la_code %in% la_code_nott_city_notts_county ~ \"notts_city_county\"   )) |>   filter(la_groups == \"notts_city_county\") |>   group_by(la_groups, imd_year) |>   mutate(imd_decile_la = ntile(-imd_score, n = 10))"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"local-imd-deciles-for-nott-city-and-notts-county","dir":"Articles","previous_headings":"IMD ranks","what":"Local IMD deciles for Nott City and Notts County","title":"How to calculate 'local' IMD deciles","text":"expected, Figure 3.1 shows equal distribution recalculated ‘local’ IMD deciles LAs Nottingham City Nottinghamshire County. Figure 3.2 shows recalculated ‘local’ IMD ranks individual selected LA. sill differences distributions ‘local’ IMD ranks across different LAs. However, rankings recalculated using IMD scores LAs interest may therefore better presentation variation across LAs.","code":"# Plot ENG and NOTTS deciles ---- imd_by_la |>   mutate(imd_decile_la = factor(imd_decile_la,     levels = 1:10,     labels = c(\"1 - Most deprived\", 2:9, \"10 - Least deprived\")   )) |>   filter(la_code %in% la_code_nott_city_notts_county) |>   ggplot(aes(factor(imd_decile_la), fill = factor(imd_decile_la))) +   geom_bar() +   scale_fill_viridis_d() +   labs(x = \"IMD decile\", y = \"Count\", fill = \"IMD decile\") +   scale_x_discrete(labels = 1:10) +   ggtitle(\"Fig. 3.1. Combined 'local' IMD deciles for LSOAs in Nott City and Notts County\") # Plot ENG and NOTTS deciles ---- imd_by_la |>   mutate(imd_decile_la = factor(imd_decile_la,     levels = 1:10,     labels = c(\"1 - Most deprived\", 2:9, \"10 - Least deprived\")   )) |>   filter(la_code %in% la_code_nott_city_notts_county) |>   ggplot(aes(factor(imd_decile_la), fill = factor(imd_decile_la))) +   geom_bar() +   scale_fill_viridis_d() +   labs(x = \"IMD decile\", y = \"Count\", fill = \"IMD decile\") +   facet_wrap(~la_name, ncol = 2) +   scale_x_discrete(labels = 1:10) +   ggtitle(\"Fig. 3.2. Individual 'local' IMD deciles for LSOAs in Nott City and Notts County\")"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"compare-distributions-of-imd-deciles","dir":"Articles","previous_headings":"","what":"Compare distributions of IMD deciles","title":"How to calculate 'local' IMD deciles","text":"changes IMD decile ranks can seen comparing bar plots shown (e.g., Fig 2.2 vs. Fig 3.2) – can hard spot. Changes distribution IMD deciles (see density plots Figure 4) illustrate effect recalculating ‘local’ IMD scores bit clearer. plot left title ‘ENG IMD’ shows distribution IMD deciles IMD scores England used calculate decile ranks. plot right (Local IMD) shows distribution IMD deciles IMD scores selected LAs used. effect recalculating local IMD scores can seen changes shape density distribution (e.g., narrow shape vs flat shape, changes peak x axis) individual IMD deciles.","code":"imd_by_la |>   pivot_longer(     cols = c(imd_decile, imd_decile_la),     names_to = \"imd_method\", values_to = \"imd_value\"   ) |>   mutate(imd_value = factor(imd_value,     levels = 1:10,     labels = c(\"1 - Most deprived\", 2:9, \"10 - Least deprived\")   )) |>   filter(la_code %in% la_code_nott_city_notts_county) |>   ggplot(aes(x = imd_score, fill = factor(imd_value))) +   scale_fill_viridis_d(direction = 1) +   labs(x = \"IMD score\", y = NULL, fill = \"IMD decile\") +   geom_density(alpha = .6, adjust = 2) +   facet_wrap(~ factor(imd_method,     levels = c(       \"imd_decile\",       \"imd_decile_la\"     ),     labels = c(       \"END IMD\",       \"Local IMD\"     )   )) +   ggtitle(\"Fig. 4. Distributions of ENG and local IMD deciles\")"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"additional-resources","dir":"Articles","previous_headings":"","what":"Additional resources","title":"How to calculate 'local' IMD deciles","text":"blog post Turner (2021) also discusses calculate local IMD scores illustrating examples SQL R.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/articles/calc-local-imd.html","id":"notes-for-anyone-contributing-to-the-html-and-vignettes","dir":"Articles","previous_headings":"","what":"Notes for anyone contributing to the html and vignettes","title":"How to calculate 'local' IMD deciles","text":"pages built https://nhs-r-community.github.io/NHSRpopulation/ done using package {pkgdown}. order rebuild pages changes use pkgdown::build_site() console. number changes supporting files folder docs/ need committed.","code":""},{"path":[]},{"path":"https://nhs-r-community.github.io/NHSRpopulation/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Zoë Turner. Author, maintainer. Francis Barton. Author. Milan Wiedemann. Author. Chris Beeley. Author.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Turner Z, Barton F, Wiedemann M, Beeley C (2024). NHSRpopulation: Indices Multiple Deprivation (IMD) England. R package version 0.0.2, https://nhs-r-community.github.io/NHSRpopulation/.","code":"@Manual{,   title = {NHSRpopulation: Indices of Multiple Deprivation (IMD) for England},   author = {Zoë Turner and Francis Barton and Milan Wiedemann and Chris Beeley},   year = {2024},   note = {R package version 0.0.2},   url = {https://nhs-r-community.github.io/NHSRpopulation/}, }"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/index.html","id":"nhsrpopulation-","dir":"","previous_headings":"","what":"Indices of Multiple Deprivation (IMD) for England","title":"Indices of Multiple Deprivation (IMD) for England","text":"goal NHSRpopulation make population estimates Lower layer Super Output Areas (LSOA) Indices Multiple Deprivation (IMD) easily available R. first iteration package data saved https://www.gov.uk/government/statistics/english-indices--deprivation-2019 subsequently moved API https://services1.arcgis.com/ keep data date (although updated every years) give access nations across UK including Wales, Scotland, Northern Ireland well England.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Indices of Multiple Deprivation (IMD) for England","text":"can install current version NHSRpopulation GitHub : find functions vignette Getting Started information recalculate IMD deciles local areas England see vignette.","code":"# install.packages(\"remotes\") remotes::install_github(\"nhs-r-community/NHSRpopulation\")"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/index.html","id":"sources-of-data","dir":"","previous_headings":"","what":"Sources of Data","title":"Indices of Multiple Deprivation (IMD) for England","text":"original source data provided R package available ONS licenced Open Government Licence v3.0.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"Indices of Multiple Deprivation (IMD) for England","text":"Please see guidance contribute. project released Contributor Code Conduct. contributing project, agree abide terms. simplest way contribute raise issue detailing feature functionality like see added, unexpected behaviour bugs experienced.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/index.html","id":"special-note-of-thanks","dir":"","previous_headings":"","what":"Special note of thanks","title":"Indices of Multiple Deprivation (IMD) for England","text":"package originally created Milan Wiedemann.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/api_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Getting data from the IMD api — api_url","title":"Getting data from the IMD api — api_url","text":"required IMD postcodes routed NHSRpostcodetools package","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/api_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Getting data from the IMD api — api_url","text":"","code":"api_url()"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/api_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Getting data from the IMD api — api_url","text":"dataset","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/get_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Query information to restrict data returned — get_data","title":"Query information to restrict data returned — get_data","text":"function queries API based information required returns ids restriction applied . IMD API restricts 2k records example. Postcode LSOA parameters require data bringing data Online_ONS_Postcode_Directory_Live take long often unnecessary.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/get_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query information to restrict data returned — get_data","text":"","code":"get_data(   data,   url_type = c(\"postcode\", \"imd\"),   fix_invalid = TRUE,   column = \"default\" )"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/get_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query information to restrict data returned — get_data","text":"data dataframe vector.data connect either postcode API imd API. url_type String defaults postcode returns information Online_ONS_Postcode_Directory_Live return Postcode information via NHSRpostcodetools package. imd connects Indices_of_Multiple_Deprivation_(IMD)_2019 return IMD information. fix_invalid Boolean, default TRUE. Whether try fix postcodes found (potentially terminated codes, contain typos). column String. Default mean automatic connection column called postcode postcode data expected lsoa11 imd data requested via parameter url_type = \"imd\".","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/get_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query information to restrict data returned — get_data","text":"data frame","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_lsoa.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to check if a string is an LSOA code — is_lsoa","title":"Function to check if a string is an LSOA code — is_lsoa","text":"Function check string LSOA code","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_lsoa.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to check if a string is an LSOA code — is_lsoa","text":"","code":"is_lsoa(data)"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_lsoa.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to check if a string is an LSOA code — is_lsoa","text":"data string","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_lsoa.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to check if a string is an LSOA code — is_lsoa","text":"Logical","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_postcode.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to check if a string is a valid postcode regardless of its\nformatting. — is_postcode","title":"Function to check if a string is a valid postcode regardless of its\nformatting. — is_postcode","text":"without one space permitted. work data two spaces included 6 character postcodes. MIT licenced package Rbduk https://github.com/sama-ds/Rbduk/blob/main/R/is_postcode.R","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_postcode.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to check if a string is a valid postcode regardless of its\nformatting. — is_postcode","text":"","code":"is_postcode(data)"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_postcode.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to check if a string is a valid postcode regardless of its\nformatting. — is_postcode","text":"data string","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_postcode.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to check if a string is a valid postcode regardless of its\nformatting. — is_postcode","text":"Logical","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/is_postcode.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Function to check if a string is a valid postcode regardless of its\nformatting. — is_postcode","text":"","code":"is_postcode(\"SW1a2nP\") #> [1] TRUE is_postcode(\"SW1a 2nP\") #> [1] TRUE"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://nhs-r-community.github.io/NHSRpopulation/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""}]
